---
layout: default
---

{% assign trees = site.pages | where_exp: "page", "page.tags contains 'Category/Family-Tree'" %}

<div class="svg-container">
    {% capture drawer__content %}
        <div class="controls">
            <section class="button-group">
                <button id="reset-button" title="reset view" data-variant="bg-color-hover">
                    <span class="material-symbols-outlined">
                        restart_alt
                    </span>
                    Reset View
                </button>
                {%- comment -%}
                    <button id="save-button" title="save view">
                    <span class="material-symbols-outlined">
                    save
                    </span>
                    Save Current View
                    </button>
                {%- endcomment -%}
            </section>
            <section class="button-group">
                <p class="instructions">
                    Jump to Generation...
                </p>
                <button class="jump-gen" data-gen="0" data-variant="bg-color-hover">
                    Gen 1 - 2
                </button>
                <button class="jump-gen" data-gen="1"data-variant="bg-color-hover">
                    Gen 2 - 3
                </button>
                <button class="jump-gen" data-gen="2" data-variant="bg-color-hover">
                    Gen 3 - 4
                </button>
                <button class="jump-gen" data-gen="3" data-variant="bg-color-hover">
                    Gen 4 - 5
                </button>
            </section>

            <div class="instructions-wrapper">
                <p class="instructions">
                    Use
                    Pan:
                    <span>
                        arrow keys
                    </span>
                    or
                    <span>
                        WASD
                    </span>
                </p>
                <p class="instructions">
                    Zoom:
                    <span>
                        +
                    </span>
                    or
                    <span>
                        -
                    </span>
                </p>
                <p class="instructions">
                    <span>
                        Hover
                    </span>
                    portrait to highlight family
                </p>
                <p class="instructions">
                    <span>
                        Click
                    </span>
                    portrait to open page
                </p>
            </div>

        </div>
    {% endcapture %}
    {%- comment -%}
        <div class="button-wrapper single">

        <button class="toggle-button">
        <span class="material-symbols-outlined">
        chevron_left
        </span>
        </button>


        </div>
    {%- endcomment -%}
    <svg class="family-tree" viewbox="0 0 100 100" data-offset-x="{{page.startingOffsetX}}" data-offset-y="{{page.startingOffsetY}}" data-starting-scale="{{page.startingScale}}">
        <defs>
            <filter id="inner-shadow" x="-20%" y="-20%" width="140%" height="140%" filterUnits="objectBoundingBox" primitiveUnits="userSpaceOnUse" color-interpolation-filters="linearRGB">
                <feFlood flood-color="#000000" flood-opacity="1" result="flood"/>
                <feComposite in="flood" in2="SourceAlpha" operator="out" result="composite1"/>
                <feOffset dx="4" dy="4" in="composite1" result="offset"/>
                <feGaussianBlur stdDeviation="4 4" in="offset" edgeMode="none" result="blur"/>
                <feComposite in="blur" in2="SourceAlpha" operator="in" result="composite2"/>
                <feMerge result="merge">
                    <feMergeNode in="SourceGraphic"/>
                    <feMergeNode in="composite2"/>
                </feMerge>
            </filter>
            <linearGradient id="_Linear1" x1="0" y1="0" x2="1" y2="0" gradientUnits="objectBoundingBox" gradientTransform="rotate(45deg)">
                <stop offset="0" style="stop-color:rgb(255,30,106);stop-opacity:1"/>
                <stop offset="1" style="stop-color:rgb(255, 124, 43);stop-opacity:1"/>
            </linearGradient>
            <linearGradient id="_Linear1-flipped" x1="0" y1="0" x2="1" y2="0" gradientUnits="objectBoundingBox" gradientTransform="rotate(-45deg)">
                <stop offset="0" style="stop-color:rgb(30, 240, 255);stop-opacity:1"/>
                <stop offset="1" style="stop-color:rgb(43, 255, 174);stop-opacity:1"/>
            </linearGradient>
            <linearGradient id="_Linear2" x1="0" y1="0" x2="1" y2="0" gradientUnits="objectBoundingBox" gradientTransform="rotate(45deg)">
                <stop offset="0" style="stop-color:rgb(69, 111, 218);stop-opacity:1"/>
                <stop offset="1" style="stop-color:rgb(199, 84, 253);stop-opacity:1"/>
            </linearGradient>
            <linearGradient id="_Linear3" x1="0" y1="0" x2="1" y2="0" gradientUnits="objectBoundingBox" gradientTransform="rotate(45deg)">
                <stop offset="0" style="stop-color:rgb(80, 175, 253);stop-opacity:1"/>
                <stop offset="1" style="stop-color:rgb(82, 6, 233);stop-opacity:1"/>
            </linearGradient>
            <linearGradient id="_Linear4" x1="0" y1="0" x2="1" y2="0" gradientUnits="objectBoundingBox" gradientTransform="rotate(45deg)">
                <stop offset="0" style="stop-color:rgb(50,233,254);stop-opacity:1"/>
                <stop offset="1" style="stop-color:rgb(21, 134, 247);stop-opacity:1"/>
            </linearGradient>
            <linearGradient id="_Linear5" x1="0" y1="0" x2="1" y2="0" gradientUnits="objectBoundingBox" gradientTransform="rotate(45deg)">
                <stop offset="0" style="stop-color:rgb(57,155,252);stop-opacity:1"/>
                <stop offset="1" style="stop-color:rgb(105,251,188);stop-opacity:1"/>
            </linearGradient>
            <linearGradient id="lgrad0" x1="100%" y1="100%" x2="0%" y2="0%" >

                <stop offset="0%" style="stop-color:rgb(238,130,238);stop-opacity:1.00" />
                <stop offset="100%" style="stop-color:rgb(0,209,255);stop-opacity:1.00" />

            </linearGradient>
            <marker
      id="dot"
      viewBox="0 0 10 10"
      refX="5"
      refY="5"
      markerWidth="5"
      markerHeight="5">
                <circle cx="5" cy="5" r="5" fill="cyan" />
            </marker>
        </defs>
        <rect x="0" y="0" width="100%" height="100%" fill="url(#lgrad)"/>
        {% assign people = site.notes | where_exp: "note", "note.tags contains page.clanName and note.tags contains 'Category/Individual'"%}
        {% for person in people %}
            {%assign clan = person.Clan %}
            {% assign parents = person.parents | jsonify  %}
            {% assign partners = person.partners | jsonify %}
            {% assign title = person.title %}
            {% assign linkPath = person.url %}
            {% assign firstGen = false %}
            {% if person.tags contains "Generation/First" %}
                {% assign firstGen = true %}
            {% endif %}

            {% if person.firstName %}
                {% assign firstName = person.firstName %}
            {% else %}
                {% assign nameSegments = person.title | split: " " %}
                {% assign firstName = nameSegments[0] %}
            {% endif %}
            {% capture namePath %}
                /assets/clans/{{clan | capitalize}}/{{firstName}}.webp
            {% endcapture %}
            {% assign imagePosition = person.imagePosition %}

            {% include family-tree-card.html person=person source=namePath parents=parents partners=partners ourTitle=title firstGen=firstGen linkPath=linkPath imagePosition=imagePosition %}

        {% endfor %}
    </svg>

    {% include drawer.html variant="right" content=drawer__content sideButton=true classes="family-tree-controls" alwaysFixed=true %}
</div>

<script src="/assets/scripts/drawers.js" type="module"></script>
<script src="/assets/scripts/zoom.js" type="module"></script>
<script src="/assets/scripts/family-tree.js" type="module"></script>
